(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4845:function(){},8253:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(9268);function i(e){let{test:t,children:n,fallback:i}=e;return t?(0,s.jsx)(s.Fragment,{children:n}):i?(0,s.jsx)(s.Fragment,{children:"[fallback]"}):null}},7540:function(e,t,n){"use strict";n.d(t,{Vv:function(){return i},YX:function(){return r},Z_:function(){return l},cs:function(){return a},wY:function(){return c}});var s=n(6006);let i=s.memo;function l(e){let t={};for(let[n,s]of Object.entries(e))s&&(t["data-".concat(n)]="");return t}function c(e,t,n){return e?t:n}function r(e){return async function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];return new Promise(t=>{"startViewTransition"in document?document.startViewTransition(()=>{t(e(...n))}):t(e(...n))})}}function a(e){"startViewTransition"in document?document.startViewTransition(()=>{e()}):e()}},6822:function(e,t,n){"use strict";let s;n.r(t),n.d(t,{default:function(){return eo}});var i=n(9268),l=n(884),c=n(6184),r=n.n(c),a=n(8115),d=n(6242),o=n(7540);let u={GranCrest:"グランクレスト",DX3rd:"ダブルクロス3rd",Linux:"ぃぬｘ"};var m=n(3593),h=n(9541),f=n(3617);async function x(e,t){let n=f.SHA256.hash(t),s=f.Utf16.parse(e),i=f.AES.encrypt(s,n);return i.toString()}let j=(0,a.cn)(""),p=(0,a.cn)(""),_=(0,a.cn)(e=>{let t=e(p);return t.split("|").map(e=>e.trim())}),y=(0,a.cn)(""),w=(0,a.cn)(""),v=(0,a.cn)(""),b=(0,a.cn)(""),g=(0,a.cn)(""),N=(0,h.O4)("GASSHEE_API_ENDPOINT","https://script.google.com/macros/s/AKfycbzFV_FxDq0vb-dJqWFxtxDak9Xh4qWTIkWwNxEyTdu9BwYkuwK2Dq6zaPjB6LoaNchBdA/exec");(0,a.cn)(null,(e,t)=>{t(v,""),t(g,"")}),(0,a.cn)(null,async(e,t,n)=>{let{sheetAtom:s,system:i,baseMode:l,saveTo:c,router:r,setPromise:a}=n,d=e(s),u=e(g),h=e(y),f=e(v),p=e(b),k=e(_),A=e(j),Y=e(w),D=e(N),C=u?{type:"cipher",id:A||void 0,system:i,user:Y,...d,name:h,tags:k,parole:f||void 0,password:p||void 0,content:await x(JSON.stringify(d),u)}:{type:"plain",id:A||void 0,system:i,user:Y,name:h,tags:k,parole:f||void 0,password:p||void 0,content:d},E=JSON.stringify(C,null,"local"===c?2:void 0);if("server"===c){let e=new URLSearchParams;e.append("data",E),e.append("mode",A&&A?l:"create");let t=await fetch(D,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:e}).then(async e=>{let t=await e.json();(null==t?void 0:t.success)&&(null==t?void 0:t.id)?(0,o.cs)(()=>{console.log("successfully post data on server"),r.push("/systems/".concat(i,"?id=").concat(t.id))}):(console.error("Error: ".concat(t)),window.alert("サーバーへの保存に失敗しました。"),a(null))}).catch(e=>{console.error("unknown error on post ".concat(e)),window.alert("サーバーへの保存に失敗しました。"),a(null)});return t}"local"===c&&function(e,t){let n=new Blob([t],{type:"text/plain"}),s=document.createElement("a");s.href=URL.createObjectURL(n),s.target="_blank",s.download=e,s.click(),URL.revokeObjectURL(s.href)}("".concat(i,"-").concat(h,"-").concat((0,m.d)().format("YYYY-MM-DD_HHmmss"),".json"),E)}),(0,a.cn)("簡易設定");let k=[{id:"name-asc",field:"name",direction:"asc"},{id:"name-desc",field:"name",direction:"desc"},{id:"system-asc",field:"system",direction:"asc"},{id:"system-desc",field:"system",direction:"desc"},{id:"user-asc",field:"user",direction:"asc"},{id:"user-desc",field:"user",direction:"desc"},{id:"updatedAt-asc",field:"updatedAt",direction:"asc"},{id:"updatedAt-desc",field:"updatedAt",direction:"desc"}],A=(0,d.G)("order",k[7]),Y=(0,a.cn)(null,(e,t,n)=>{let s=k.find(e=>e.id===n);s&&(0,o.cs)(()=>{t(A,s)})});function D(e){return(0,a.cn)(t=>t(e),(t,n,s)=>{(0,o.cs)(()=>{n(e,s),n(R,1)})})}let C=(0,d.G)("parole",""),E=D((0,a.cn)("")),O=(s=null,(0,a.cn)(null,(e,t,n)=>{t(C,n),s&&window.clearTimeout(s),s=window.setTimeout(()=>{t(E,n)},500)})),S=D((0,d.G)("tag","")),T=D((0,d.G)("system","")),F=D((0,d.G)("free","")),L=(0,a.cn)(e=>{let t=e(F);return t.split("|").map(e=>e.trim())}),M=(0,a.cn)(async e=>{let t=e(E),n=e(N);return await z(t,n)}),P=(0,a.cn)(async e=>{let t=await e(M);return Array.from(new Set(t.flatMap(e=>e.tags)))}),U=(0,a.cn)(async e=>{let t=await e(M);return Array.from(new Set(t.map(e=>e.system)))}),X=(0,a.cn)(async e=>{let t=e(S),n=e(T),s=e(L),i=e(A),l=await e(M),c=l.filter(e=>{var i;if(t&&!e.tags.includes(t)||n&&!e.system.includes(n)&&!(null===(i=u["unit.system"])||void 0===i?void 0:i.includes(n)))return!1;for(let t of s)if(t&&!e.name.includes(t)&&!e.user.includes(t)&&!e.updatedAt.includes(t))return!1;return!0}),r="asc"===i.direction?(e,t)=>e[i.field].localeCompare(t[i.field]):(e,t)=>t[i.field].localeCompare(e[i.field]);return c.sort(r)}),G=(0,a.cn)(async e=>{let t=await e(X);return Math.ceil(t.length/5)}),R=(0,a.cn)(1),V=(0,a.cn)(null,async(e,t,n)=>{let s=await e(G);n>0&&n<=s&&t(R,n)}),H=(0,a.cn)(null,async(e,t)=>{let n=await e(R),s=await e(G);n<s&&t(R,n+1)}),Z=(0,a.cn)(null,async(e,t)=>{let n=await e(R);n>1&&t(R,n-1)}),q=(0,a.cn)(null,async(e,t)=>{let n=await e(G);t(R,n)}),Q=(0,a.cn)(null,async(e,t)=>{t(R,1)}),W=(0,a.cn)(async e=>{let t=await e(X),n=e(R);return t.slice((n-1)*5,5*n)});async function z(e,t){try{let e=await fetch("".concat(t,"?mode=list")).then(e=>e.json());if(e.success)return e.items}catch(e){console.error(e)}return[]}function B(){return(0,i.jsxs)("section",{children:[(0,i.jsxs)("ul",{className:r().list,children:[(0,i.jsx)("li",{children:(0,i.jsx)(I,{})}),(0,i.jsx)("li",{children:(0,i.jsx)(ee,{label:"合言葉",setterAtom:O,valueAtom:C})}),(0,i.jsx)("li",{children:(0,i.jsx)(ee,{label:"システム",list:"filter-systems",setterAtom:T,valueAtom:T})}),(0,i.jsx)("li",{children:(0,i.jsx)(ee,{label:"タグ",list:"filter-tags",setterAtom:S,valueAtom:S})}),(0,i.jsx)("li",{children:(0,i.jsx)(ee,{label:"フリー",setterAtom:F,valueAtom:F})})]}),(0,i.jsx)($,{})]})}let J={asc:"昇順",desc:"降順"},K={name:"名前",system:"システム",user:"ユーザー",updatedAt:"更新日時"};function I(){let[e,t]=function(){let e=(0,l.Dv)(A),t=(0,l.b9)(Y);return[e,t]}();return(0,i.jsxs)("label",{className:r().field,children:[(0,i.jsx)("span",{children:"ソート順"}),(0,i.jsx)("span",{className:r()["select-wrapper"],children:(0,i.jsx)("select",{className:r().select,title:"ソート順",value:e.id,onChange:e=>{console.log(e.target.value),t(e.target.value)},children:k.map(e=>{let{id:t,field:n,direction:s}=e;return(0,i.jsx)("option",{label:"".concat(K[n],": ").concat(J[s]),value:t},t)})})})]})}function $(){let e=(0,l.Dv)(P),t=(0,l.Dv)(U);return(0,i.jsxs)("div",{children:[(0,i.jsx)("datalist",{id:"filter-tags",children:e.map(e=>(0,i.jsx)("option",{value:e},e))}),(0,i.jsx)("datalist",{id:"filter-systems",children:t.map(e=>(0,i.jsx)("option",{value:e},e))})]})}function ee(e){let{label:t,valueAtom:n,setterAtom:s,list:c}=e,a=(0,l.Dv)(n),d=(0,l.b9)(s),o=async e=>{d(e.target.value)};return(0,i.jsxs)("label",{className:r().field,children:[(0,i.jsx)("span",{children:t}),(0,i.jsx)("input",{className:r().input,list:c,type:"text",value:a,onChange:o})]})}var et=n(2696),en=n.n(et),es=n(6006),ei=n(8253),el=n(4983),ec=n.n(el);function er(){return(0,i.jsx)(es.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)(ea,{})})}function ea(){let e=(0,l.Dv)(W),t=(0,l.b9)(S),n=(0,l.b9)(T),s=(0,l.b9)(F);return(0,i.jsxs)("section",{children:[(0,i.jsx)(ed,{}),(0,i.jsxs)("table",{className:ec().table,children:[(0,i.jsx)("caption",{children:"一覧"}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"名前"}),(0,i.jsx)("th",{className:ec().system,children:"システム"}),(0,i.jsx)("th",{className:ec().user,children:"ユーザー"}),(0,i.jsx)("th",{className:ec().tags,children:"タグ"}),(0,i.jsx)("th",{className:ec()["updated-at"],children:"更新日時"})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.name||e.id}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:ec()["filter-link"],onClick:()=>n(e.system),children:u[e.system]||e.system})}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{className:ec()["filter-link"],onClick:()=>s(e.user),children:e.user})}),(0,i.jsx)("td",{children:(0,i.jsx)("ul",{className:ec()["tag-list"],children:e.tags.map(e=>(0,i.jsx)("li",{children:(0,i.jsx)("a",{className:ec()["filter-link"],"data-text":e,onClick:()=>t(e),children:e})},e))})}),(0,i.jsx)("td",{className:ec()["updated-at"],children:(0,m.d)(e.createdAt).format("YYYY-MM-DD HH:mm")})]},e.id))})]})]})}function ed(){let e=(0,o.YX)((0,l.b9)(Q)),t=(0,o.YX)((0,l.b9)(q)),n=(0,l.Dv)(R),s=(0,l.Dv)(G),c=(0,o.YX)((0,l.b9)(H)),r=(0,o.YX)((0,l.b9)(Z)),a=(0,o.YX)((0,l.b9)(V));return(0,i.jsxs)("ol",{className:ec().pager,children:[(0,i.jsx)("li",{children:(0,i.jsx)("a",{onClick:e,children:"≪"})}),(0,i.jsx)(ei.Z,{test:n>1&&n===s&&s>2,children:(0,i.jsx)("li",{children:(0,i.jsx)("a",{onClick:()=>a(s-2),children:s-2})})}),(0,i.jsx)(ei.Z,{test:n>1,children:(0,i.jsx)("li",{children:(0,i.jsx)("a",{onClick:r,children:n-1})})}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{className:ec().current,children:n})}),(0,i.jsx)(ei.Z,{test:n<s,children:(0,i.jsx)("li",{children:(0,i.jsx)("a",{onClick:c,children:n+1})})}),(0,i.jsx)(ei.Z,{test:n<s&&1===n&&s>2,children:(0,i.jsx)("li",{children:(0,i.jsx)("a",{onClick:()=>a(3),children:n+2})})}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{onClick:t,children:"≫"})})]})}function eo(){return(0,i.jsxs)("main",{className:en().main,children:[(0,i.jsx)("section",{className:en().section,children:(0,i.jsx)(B,{})}),(0,i.jsx)("section",{className:en().section,children:(0,i.jsx)(er,{})})]})}},14:function(e,t,n){Promise.resolve().then(n.t.bind(n,5632,23)),Promise.resolve().then(n.t.bind(n,3619,23)),Promise.resolve().then(n.t.bind(n,4912,23)),Promise.resolve().then(n.bind(n,6822))},4912:function(e){e.exports={base:"page-base_base__ROwwG",main:"page-base_main__va1Ag",header:"page-base_header__8BY0Y",icon:"page-base_icon__tFLEi",title:"page-base_title__nlMQ0",footer:"page-base_footer__rXwKS","system-list":"page-base_system-list__ME8ge"}},6184:function(e){e.exports={list:"filters_list__Z2_NJ",field:"filters_field__z3nOb",input:"filters_input__G3wyR","select-wrapper":"filters_select-wrapper__weE6R",select:"filters_select__UzFqV"}},2696:function(e){e.exports={main:"search_main__lUKN_",section:"search_section__RQD9e"}},4983:function(e){e.exports={table:"unit-list_table__FOqfQ",id:"unit-list_id__v29DY",tags:"unit-list_tags__KIWJq",user:"unit-list_user__UQHUV",system:"unit-list_system__fa56L","updated-at":"unit-list_updated-at__EOFgF","filter-link":"unit-list_filter-link__cQZW2","tag-list":"unit-list_tag-list__MzjH1",pager:"unit-list_pager__7jkXg",current:"unit-list_current__QV9MW"}}},function(e){e.O(0,[832,839,667,961,744],function(){return e(e.s=14)}),_N_E=e.O()}]);